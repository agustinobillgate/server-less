
DEF INPUT PARAMETER source-number1 AS INT.
DEF INPUT PARAMETER rec-id AS INT.
DEF OUTPUT PARAMETER err-code AS INT INIT 0.

DEF BUFFER egReq FOR eg-Request.

FIND FIRST queasy WHERE RECID(queasy) = rec-id.
FIND FIRST egReq WHERE egReq.SOURCE = source-number1 NO-LOCK NO-ERROR.
IF AVAILABLE egReq THEN
DO:
    err-code = 1.
    RETURN NO-APPLY.  
END.

FIND CURRENT queasy EXCLUSIVE-LOCK.  
DELETE queasy.
